{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst datetimeInput = document.querySelector('#datetime-picker');\nconst startButton = document.querySelector('button[data-start]');\nlet userSelectedDate;\n\nflatpickr(datetimeInput, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates[0] < new Date()) {\n      startButton.disabled = true;\n      iziToast.error({\n        timeout: 3000,\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n        backgroundColor: 'rgba(239, 64, 64, 0.99)',\n        messageColor: '#FFFFFF',\n        icon: '',\n        close: false,\n      });\n      return;\n    }\n    userSelectedDate = selectedDates[0];\n    startButton.disabled = false;\n    startButton.addEventListener('click', onTick);\n  },\n});\n\nconst onTick = () => {\n  if (timer.timerId) {\n    clearInterval(timer.timerId);\n  }\n  startButton.disabled = true;\n  datetimeInput.disabled = true;\n  timer.start();\n};\n\nconst timer = {\n  deadline: userSelectedDate,\n  refs: {\n    daysOnClockface: document.querySelector('span[data-days]'),\n    hoursOnClockface: document.querySelector('span[data-hours]'),\n    minutesOnClockface: document.querySelector('span[data-minutes]'),\n    secondsOnClockface: document.querySelector('span[data-seconds]'),\n  },\n  timerId: null,\n\n  start() {\n    this.timerId = setInterval(() => {\n      const deltaTime = userSelectedDate - Date.now();\n      if (deltaTime <= 0) {\n        this.stop();\n        return;\n      }\n      const timeComponents = this.convertMs(deltaTime);\n      this.updateClockface(timeComponents);\n    }, 1000);\n  },\n\n  stop() {\n    clearInterval(this.timerId);\n    startButton.disabled = false;\n    datetimeInput.disabled = false;\n  },\n\n  convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    // console.log(days)\n    return { days, hours, minutes, seconds };\n  },\n\n  updateClockface({ days, hours, minutes, seconds }) {\n    // console.log(this.addLeadingZero(days));\n    this.refs.daysOnClockface.textContent = this.addLeadingZero(days);\n    this.refs.hoursOnClockface.textContent = this.addLeadingZero(hours);\n    this.refs.minutesOnClockface.textContent = this.addLeadingZero(minutes);\n    this.refs.secondsOnClockface.textContent = this.addLeadingZero(seconds);\n  },\n\n  addLeadingZero(value) {\n    // console.log(value)\n    return String(value).padStart(2, '0');\n  },\n};\n"],"names":["datetimeInput","startButton","userSelectedDate","flatpickr","selectedDates","iziToast","onTick","timer","deltaTime","timeComponents","ms","days","hours","minutes","seconds","value"],"mappings":"+IAMA,MAAMA,EAAgB,SAAS,cAAc,kBAAkB,EACzDC,EAAc,SAAS,cAAc,oBAAoB,EAC/D,IAAIC,EAEJC,EAAUH,EAAe,CACvB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQI,EAAe,CACrB,GAAIA,EAAc,CAAC,EAAI,IAAI,KAAQ,CACjCH,EAAY,SAAW,GACvBI,EAAS,MAAM,CACb,QAAS,IACT,QAAS,qCACT,SAAU,WACV,gBAAiB,0BACjB,aAAc,UACd,KAAM,GACN,MAAO,EACf,CAAO,EACD,MACD,CACDH,EAAmBE,EAAc,CAAC,EAClCH,EAAY,SAAW,GACvBA,EAAY,iBAAiB,QAASK,CAAM,CAC7C,CACH,CAAC,EAED,MAAMA,EAAS,IAAM,CACfC,EAAM,SACR,cAAcA,EAAM,OAAO,EAE7BN,EAAY,SAAW,GACvBD,EAAc,SAAW,GACzBO,EAAM,MAAK,CACb,EAEMA,EAAQ,CACZ,SAAUL,EACV,KAAM,CACJ,gBAAiB,SAAS,cAAc,iBAAiB,EACzD,iBAAkB,SAAS,cAAc,kBAAkB,EAC3D,mBAAoB,SAAS,cAAc,oBAAoB,EAC/D,mBAAoB,SAAS,cAAc,oBAAoB,CAChE,EACD,QAAS,KAET,OAAQ,CACN,KAAK,QAAU,YAAY,IAAM,CAC/B,MAAMM,EAAYN,EAAmB,KAAK,IAAG,EAC7C,GAAIM,GAAa,EAAG,CAClB,KAAK,KAAI,EACT,MACD,CACD,MAAMC,EAAiB,KAAK,UAAUD,CAAS,EAC/C,KAAK,gBAAgBC,CAAc,CACpC,EAAE,GAAI,CACR,EAED,MAAO,CACL,cAAc,KAAK,OAAO,EAC1BR,EAAY,SAAW,GACvBD,EAAc,SAAW,EAC1B,EAED,UAAUU,EAAI,CAQZ,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAGlE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,EAED,gBAAgB,CAAE,KAAAH,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAEjD,KAAK,KAAK,gBAAgB,YAAc,KAAK,eAAeH,CAAI,EAChE,KAAK,KAAK,iBAAiB,YAAc,KAAK,eAAeC,CAAK,EAClE,KAAK,KAAK,mBAAmB,YAAc,KAAK,eAAeC,CAAO,EACtE,KAAK,KAAK,mBAAmB,YAAc,KAAK,eAAeC,CAAO,CACvE,EAED,eAAeC,EAAO,CAEpB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CACH"}